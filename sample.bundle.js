(window.webpackJsonp=window.webpackJsonp||[]).push([["sample"],{"./node_modules/css-loader/dist/cjs.js!./src/components/game/game.css":function(e,o,s){"use strict";s.r(o);var t=s("./node_modules/css-loader/dist/runtime/api.js"),n=s.n(t)()(!1);n.push([e.i,"html, body, #react-root-node, .Game {\r\n    overflow: hidden;\r\n    width   : 100%;\r\n    height  : 100%;\r\n    margin  : 0;\r\n    padding : 0;\r\n}\r\n\r\n#renderCanvas {\r\n    width   : 100%;\r\n    height  : 100%;\r\n    touch-action: none;\r\n}\r\n\r\n.game-over div,\r\n.game-over button,\r\n.game-over h1 {\r\n    display: flex;\r\n    width: 100%;\r\n    flex-direction: column;\r\n    align-content: center;\r\n    justify-content: center;\r\n}\r\n",""]),o.default=n},"./src/components/game/game.css":function(e,o,s){var t=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s("./node_modules/css-loader/dist/cjs.js!./src/components/game/game.css");"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};t(n,a);e.exports=n.locals||{}},"./src/components/game/game.js":function(e,o,s){"use strict";s.r(o),function(e){s.d(o,"default",(function(){return y}));var t=s("./node_modules/react/index.js"),n=s("./node_modules/babylonjs/babylon.js"),a=s("./node_modules/cannon/build/cannon.js"),r=s("./node_modules/izitoast/dist/js/iziToast.js"),i=s.n(r),l=s("./node_modules/@material-ui/core/esm/Button/Button.js"),c=s("./node_modules/@emotion/core/dist/core.browser.esm.js"),d=s("./node_modules/socket.io-client/lib/index.js"),m=s.n(d),p=s("./node_modules/loglevel/lib/loglevel.js"),h=s.n(p),u=s("./node_modules/react-helmet/es/Helmet.js");s("./src/components/game/game.css"),s("./node_modules/react-dom/index.js");const g=new n.CannonJSPlugin(!0,10,a);h.a.setLevel("debug");function y(o){const[s,r]=Object(t.useState)(!1);return Object(t.useEffect)(()=>{let s,t,l;"production"===e.env.REACT_APP_ENV?(h.a.setLevel("debug"),h.a.debug("The logs have been disabled in production build."),h.a.setLevel("warn")):(h.a.setLevel("debug"),h.a.debug("The logs have been enabled in development build.")),h.a.debug("Game - useEffect",{props:o,process:e,io:m(),cannon:a,cannonPlugin:g});(()=>{const e=document.getElementById("renderCanvas"),o=new n.Engine(e,!0);s=function(){const e=new n.Scene(o);e.clearColor=n.Color3.Red();const s=new n.UniversalCamera("UniversalCamera",new n.Vector3(0,120,0),e);s.checkCollisions=!1,s.applyGravity=!1,s.setTarget(n.Vector3.Zero()),t=new n.DirectionalLight("dir02",new n.Vector3(.2,-1,0),e),t.position=new n.Vector3(0,80,0),e.enablePhysics(null,g),e.onPointerDown=function(){const o=e.createPickingRay(e.pointerX,e.pointerY,n.Matrix.Identity(),s),t=e.pickWithRay(o);h.a.debug("hit",{hit:t,ray:o}),t.pickedMesh&&t.pickedMesh.name.startsWith("Sphere-")&&((e=>{try{const o="https://freesound.org/people/newagesoup/sounds/350359/download/350359__newagesoup__wink-01.wav",s=new n.Sound("Music",o,e,null,{loop:!1,autoplay:!0});s.setVolume(1),s.play()}catch(e){h.a.error("cant play sound",e)}})(e),i.a.show({title:"Hey",message:"You destroyed "+t.pickedMesh.name,zindex:999,timeout:3e3}),l.emit("message:destroy",JSON.stringify({name:t.pickedMesh.name})))};const a=n.Mesh.CreateBox("Ground",1,e);a.scaling=new n.Vector3(100,1,100),a.position.y=-5,a.checkCollisions=!0;const r=n.Mesh.CreateBox("border0",1,e);r.scaling=new n.Vector3(1,100,100),r.position.y=-5,r.position.x=-50,r.checkCollisions=!0;const c=n.Mesh.CreateBox("border1",1,e);c.scaling=new n.Vector3(1,100,100),c.position.y=-5,c.position.x=50,c.checkCollisions=!0;const d=n.Mesh.CreateBox("border2",1,e);d.scaling=new n.Vector3(100,100,1),d.position.y=-5,d.position.z=50,d.checkCollisions=!0;const m=n.Mesh.CreateBox("border3",1,e);m.scaling=new n.Vector3(100,100,1),m.position.y=-5,m.position.z=-50,m.checkCollisions=!0;const p=new n.StandardMaterial("groundMat",e);return p.diffuseColor=new n.Color3(.5,.5,.5),p.emissiveColor=new n.Color3(.2,.2,.2),p.backFaceCulling=!1,a.material=p,r.material=p,c.material=p,d.material=p,m.material=p,a.receiveShadows=!0,a.physicsImpostor=new n.PhysicsImpostor(a,n.PhysicsImpostor.BoxImpostor,{mass:0,friction:.5,restitution:.7},e),r.physicsImpostor=new n.PhysicsImpostor(r,n.PhysicsImpostor.BoxImpostor,{mass:0},e),c.physicsImpostor=new n.PhysicsImpostor(c,n.PhysicsImpostor.BoxImpostor,{mass:0},e),d.physicsImpostor=new n.PhysicsImpostor(d,n.PhysicsImpostor.BoxImpostor,{mass:0},e),m.physicsImpostor=new n.PhysicsImpostor(m,n.PhysicsImpostor.BoxImpostor,{mass:0},e),e}(),o.runRenderLoop(()=>{s.render()}),window.addEventListener("resize",()=>{o.resize()})})(),i.a.show({title:"Hey",message:"Welcome to a PlayBern game",zindex:999,timeout:3e3}),l=m()(e.env.REACT_SOCKET_IO_SERVER),l.on("connect",()=>{i.a.show({title:"Server",message:"Connected to game server",zindex:999,timeout:3e3}),l.on("message",e=>{console.log("got message",e);try{const o=JSON.parse(e);console.log("got message",o),i.a.show({title:"Server",message:"Joined room "+o.payload.room.name,zindex:999,timeout:3e3})}catch(o){console.warn("could not decode message",e)}}),i.a.show({title:"Hey",message:"Please wait for a player to join the game",zindex:999,timeout:7e3}),l.on("message:ready",e=>{console.log("got message:ready",e);((e,o,s)=>{h.a.debug("initSpheres",e);const t=new n.StandardMaterial(o);t.alpha=1,t.diffuseColor=new n.Color3.Blue;const a=new n.StandardMaterial(o);a.alpha=1,a.diffuseColor=new n.Color3.Red;const r=new n.ShadowGenerator(2048,s);let i=0;for(let s=0;s<e.payload.room.balls.filter(e=>"blue"===e.color).length;s+=1){const e=n.Mesh.CreateSphere("Sphere-blue-"+s,16,5,o);e.material=t,e.position=new n.Vector3(20*Math.random()-10,i,10*Math.random()-5),r.addShadowCaster(e),e.physicsImpostor=new n.PhysicsImpostor(e,n.PhysicsImpostor.SphereImpostor,{mass:1},o),i+=2}i=0;for(let s=0;s<e.payload.room.balls.filter(e=>"red"===e.color).length;s+=1){const e=n.Mesh.CreateSphere("Sphere-red-"+s,16,5,o);e.material=a,e.position=new n.Vector3(20*Math.random()-10,i,10*Math.random()-5),r.addShadowCaster(e),e.physicsImpostor=new n.PhysicsImpostor(e,n.PhysicsImpostor.SphereImpostor,{mass:1},o),i+=2}})(JSON.parse(e),s,t)}),l.on("message:state-update",e=>{h.a.debug("message:state-update",{message:e});try{const o=JSON.parse(e);s.getMeshByName(o.payload.destroyedSphere.name).dispose()}catch(e){h.a.warn("message:state-update",{e:e})}}),l.on("message:game-over",e=>{h.a.debug("message:game-over",{message:e});try{const o=JSON.parse(e),s=o.payload.destroyed.filter(e=>e.startsWith("Sphere-blue")),t=o.payload.destroyed.filter(e=>e.startsWith("Sphere-red"));let n=null;s.length>t.length?(i.a.show({title:"Hey",message:"Blue won",zindex:999,timeout:7e3}),n="blue"):s.length<t.length?(i.a.show({title:"Hey",message:"Red won",zindex:999,timeout:7e3}),n="red"):s.length===t.length&&(i.a.show({title:"Hey",message:"Nobody won",zindex:999,timeout:7e3}),n="nobody"),r({winner:n})}catch(e){h.a.warn("message:game-over",{e:e})}})})},[]),Object(c.a)("div",{className:"Game"},Object(c.a)(u.a,null,Object(c.a)("script",{src:"https://cdn.babylonjs.com/cannon.js"})),s?Object(c.a)("div",{className:"game-over"},Object(c.a)("h1",{style:{fontFamily:"Roboto",textAlign:"center"}},s.winner.toUpperCase()," ","WON!!"),Object(c.a)(l.a,{variant:"contained",color:"primary",onClick:()=>{window.location.reload()},style:{width:"100%"}},"NEW GAME")):Object(c.a)("canvas",{id:"renderCanvas"}))}}.call(this,s("./node_modules/process/browser.js"))},0:function(e,o){}}]);